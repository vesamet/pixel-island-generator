(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{195:function(e,t,n){var content=n(211);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(63).default)("fd072be2",content,!0,{sourceMap:!1})},196:function(e,t,n){var content=n(219);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(63).default)("1b7833da",content,!0,{sourceMap:!1})},197:function(e,t,n){"use strict";n.r(t);n(199);var o=n(200),r=n.n(o),l={props:{width:{type:Number,default:1e4},height:{type:Number,default:1e4}},data:function(){return{board:null}},methods:{onMoveEnd:function(){this.$emit("on-move-end",this.getCoordinates())},moveTo:function(e,t,n){e=-e,t=-t,n&&(this.board.moveTo(0,0),this.board.zoomAbs(0,0,n));var o=this.getCenterOffset(),r=this.board.getTransform().scale;this.board.smoothMoveTo(e*r+o.x,t*r+o.y,r)},getCoordinates:function(){var e=this.getCenterOffset(),t=this.board.getTransform();return{x:Math.round(-t.x/t.scale+e.x/t.scale),y:Math.round(-t.y/t.scale+e.y/t.scale),scale:t.scale}},getCenterOffset:function(){return{x:this.$refs.container.clientWidth/2,y:this.$refs.container.clientHeight/2}}},mounted:function(){var e=this,t=this.$refs.board;this.board=r()(t,{maxZoom:1,minZoom:.1,initialX:0,initialY:0,initialZoom:.3,smoothScroll:!1}),this.board.on("panend",(function(t){e.onMoveEnd()})),this.board.on("zoom",(function(t){e.onMoveEnd()})),this.$nextTick((function(){e.moveTo(e.width/2,e.height/2)}))},beforeDestroy:function(){this.board.dispose()}},d=(n(210),n(31)),component=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"container",staticClass:"container"},[t("div",{ref:"board",staticClass:"board",style:"\n    width: "+this.width+"px;\n    height: "+this.height+"px;\n  "},[this._t("board")],2),this._v(" "),t("div",{staticClass:"controls"},[this._t("controls")],2)])}),[],!1,null,"6671df68",null);t.default=component.exports},198:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNCAyNCIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMTIgLjVjLTYuNjMgMC0xMiA1LjI4LTEyIDExLjc5MiAwIDUuMjExIDMuNDM4IDkuNjMgOC4yMDUgMTEuMTg4LjYuMTExLjgyLS4yNTQuODItLjU2NyAwLS4yOC0uMDEtMS4wMjItLjAxNS0yLjAwNS0zLjMzOC43MTEtNC4wNDItMS41ODItNC4wNDItMS41ODItLjU0Ni0xLjM2MS0xLjMzNS0xLjcyNS0xLjMzNS0xLjcyNS0xLjA4Ny0uNzMxLjA4NC0uNzE2LjA4NC0uNzE2IDEuMjA1LjA4MiAxLjgzOCAxLjIxNSAxLjgzOCAxLjIxNSAxLjA3IDEuODAzIDIuODA5IDEuMjgyIDMuNDk1Ljk4MS4xMDgtLjc2My40MTctMS4yODIuNzYtMS41NzctMi42NjUtLjI5NS01LjQ2Ni0xLjMwOS01LjQ2Ni01LjgyNyAwLTEuMjg3LjQ2NS0yLjMzOSAxLjIzNS0zLjE2NC0uMTM1LS4yOTgtLjU0LTEuNDk3LjEwNS0zLjEyMSAwIDAgMS4wMDUtLjMxNiAzLjMgMS4yMDkuOTYtLjI2MiAxLjk4LS4zOTIgMy0uMzk4IDEuMDIuMDA2IDIuMDQuMTM2IDMgLjM5OCAyLjI4LTEuNTI1IDMuMjg1LTEuMjA5IDMuMjg1LTEuMjA5LjY0NSAxLjYyNC4yNCAyLjgyMy4xMiAzLjEyMS43NjUuODI1IDEuMjMgMS44NzcgMS4yMyAzLjE2NCAwIDQuNTMtMi44MDUgNS41MjctNS40NzUgNS44MTcuNDIuMzU0LjgxIDEuMDc3LjgxIDIuMTgyIDAgMS41NzgtLjAxNSAyLjg0Ni0uMDE1IDMuMjI5IDAgLjMwOS4yMS42NzguODI1LjU2IDQuODAxLTEuNTQ4IDguMjM2LTUuOTcgOC4yMzYtMTEuMTczIDAtNi41MTItNS4zNzMtMTEuNzkyLTEyLTExLjc5MnoiIGZpbGw9IndoaXRlIi8+PC9zdmc+"},210:function(e,t,n){"use strict";n(195)},211:function(e,t,n){(t=n(62)(!1)).push([e.i,".container[data-v-6671df68]{position:relative;width:100%;height:100vh;overflow:hidden}.board[data-v-6671df68]{position:relative;margin:0;padding:0}.board img[data-v-6671df68]{image-rendering:crisp-edges}.board img[data-v-6671df68],.controls[data-v-6671df68]{width:100%;height:100%}.controls[data-v-6671df68]{position:absolute;padding:10px;top:0;left:0;z-index:2}.controls button[data-v-6671df68]{pointer-events:all;margin-right:10px}",""]),e.exports=t},218:function(e,t,n){"use strict";n(196)},219:function(e,t,n){(t=n(62)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Langar&display=swap);"]),t.push([e.i,'body{font-size:12px;background-color:#3670b5}body,button,input,select{font-family:"Langar",cursive}.container{position:relative}.settings{margin-top:5px}h1{color:#fff;text-shadow:0 0 5px #391d9e,0 0 7px #000}h1>span{font-size:.6em}a.creator-link{color:#fff;text-shadow:0 0 3px #391d9e,0 0 3px #000;text-decoration:none;padding-right:10px}.map{position:absolute;left:0;top:0;width:100%;height:100%;z-index:1;image-rendering:crisp-edges}.input-box{padding:3px;margin:4px;display:inline-block}.input-box,button{background-color:#011e4b;box-shadow:0 0 3px #391d9e,0 0 3px #000;color:#fff}button{padding:5px;border:none;border-radius:5px;text-transform:uppercase;font-weight:700;letter-spacing:2px;font-size:1em;transition:all .3s ease}button:hover{cursor:pointer;background-color:#1b3f75}.render-btn{background-color:#4b8828;box-shadow:0 0 3px #095015,0 0 3px #8cf777;margin-top:3px}.render-btn:hover{background-color:#74c048}.loading-overlay{position:absolute;width:100%;height:100%;z-index:2;color:#fff;background-color:#000;opacity:.8;text-align:center}.loading-overlay>p{font-size:2em;position:relative;top:50%;transform:translateY(-50%)}.footer{position:absolute;right:5px;bottom:5px;pointer-events:all;z-index:3}.footer img{width:20px}.footer button{padding:3px 3px 0}',""]),e.exports=t},220:function(e,t,n){"use strict";n.r(t);var o=[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n      Loading"),t("br"),this._v("\n      The page may become unresponsive while generating the map.\n    ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer"},[t("p",[this._v("\n      Made by\n      "),t("a",{staticClass:"creator-link",attrs:{href:"https://github.com/vesamet/",target:"_blank"}},[this._v("Gwenaël Guyot")]),this._v(" "),t("a",{attrs:{href:"https://github.com/vesamet/pixel-island-generator",target:"_blank"}},[t("button",[t("img",{attrs:{src:n(198),alt:"github"}})])])])])}],r=(n(61),n(48),n(15),n(49),n(50),n(35),n(7)),l=n(197),d=(n(146),n(212),n(10)),c=n(214),h=n.n(c),m=n(215),v=n(217),f=n.n(v);n(101);function x(e,t){this.width=e,this.height=t,this.pixel=new Array(e);for(var n=0;n<e;n++){this.pixel[n]=new Array(t);for(var o=0;o<t;o++)this.pixel[n][o]=[0,0,0,0]}}x.prototype.subsample=function(e){for(var t=~~(this.width/e),n=~~(this.height/e),o=new Array(t),r=0;r<t;r++){o[r]=new Array(n);for(var l=0;l<n;l++){for(var q=[0,0,0,0],i=0;i<e;i++)for(var d=0;d<e;d++){var c=this.pixel[r*e+i][l*e+d];q[0]+=c[3]*c[0],q[1]+=c[3]*c[1],q[2]+=c[3]*c[2],q[3]+=c[3]}q[3]&&(q[0]/=q[3],q[1]/=q[3],q[2]/=q[3],q[3]/=e*e),o[r][l]=q}}this.width=t,this.height=n,this.pixel=o},x.prototype.dataURL=function(){function e(e){return~~(255*Math.max(0,Math.min(1,e)))}function t(t){return e(Math.pow(t,.45455))}function n(n,o,r){for(var data="\0",l=0;l<o;l++){var d=n[l][r];data+=String.fromCharCode(t(d[0]),t(d[1]),t(d[2]),e(d[3]))}return data}function o(i){return String.fromCharCode(i>>>24,i>>>16&255,i>>>8&255,255&i)}function r(e,data){return o(data.length)+e+data+o(function(data){for(var e=-1,i=0;i<data.length;i++)for(var b=256|data.charCodeAt(i);1!=b;b>>>=1)e=e>>>1^(1&(e^b)?3988292384:0);return~e}(e+data))}return"data:image/png;base64,"+function(data){for(var e="",i=5,t=8*data.length+5;i<t;i+=6)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(data.charCodeAt(~~(i/8)-1)<<8|data.charCodeAt(~~(i/8)))>>7-i%8&63];for(;e.length%4;e+="=");return e}("PNG\r\n\n"+r("IHDR",o(this.width)+o(this.height)+"\b\0\0\0")+r("IDAT",function(data){var e="x",i=0;do{var t=data.slice(i,i+65535),n=t.length;e+=String.fromCharCode(((i+=t.length)==data.length)<<0,255&n,n>>>8,255&~n,~n>>>8&255),e+=t}while(i<data.length);return e+o(function(data){for(var e=1,t=0,i=0;i<data.length;i++)t=(t+(e=(e+data.charCodeAt(i))%65521))%65521;return t<<16|e}(data))}(function(e,t,o){for(var data="",r=0;r<o;r++)data+=n(e,t,r);return data}(this.pixel,this.width,this.height)))+r("IEND",""))};var w={generate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f.a.object({type:f.a.string().valid("orbedArchipelago","archipelago").default("archipelago"),size:f.a.object({width:f.a.number().integer().min(1).max(34e3).default(10),height:f.a.number().integer().min(1).max(34e3).default(10)}).default(),seed:f.a.object({elevation:f.a.string().trim().alphanum().min(1).max(100),moisture:f.a.string().trim().alphanum().min(1).max(100)}).default(),format:f.a.string().valid("collection","png").default("collection")}).validate(e,{stripUnknown:!0}),n=t.value,o=t.error;if(o)return{error:o};n.seed.elevation||(n.seed.elevation=this.getRandomSeed()),n.seed.moisture||(n.seed.moisture=this.getRandomSeed());for(var r=[],l=1;l<=n.size.width;l++)for(var d=1;d<=n.size.height;d++){var c=this.getBiome(n,{x:l,y:d});r.push({position:{x:l,y:d},biome:c})}switch(n.format){case"collection":return r;case"png":return this.createMapImage(n,r)}},getBiome:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},o=new h.a(t.seed.elevation),r=new h.a(t.seed.moisture);function l(e,t){return o.noise2D(e,t)/2+.5}function d(e,t){return r.noise2D(e,t)/2+.5}var c=4,m=n.x/t.size.width-.5,v=n.y/t.size.height-.5;switch(t.size.type){case"orbedArchipelago":e=1.4*l(1*c*m,1*c*v)+.74*l(2*c*m,2*c*v)+0*l(4*c*m,4*c*v)+.29*l(8*c*m,8*c*v)+0*l(16*c*m,16*c*v)+.02*l(32*c*m,32*c*v),e/=2.03,e=Math.pow(e,4);break;case"archipelago":e=1.4*l(1*c*m,1*c*v)+.74*l(2*c*m,2*c*v)+0*l(4*c*m,4*c*v)+.29*l(8*c*m,8*c*v)+0*l(16*c*m,16*c*v)+.02*l(32*c*m,32*c*v),e/=2.03,e=Math.pow(e,7);break;default:e=1.4*l(1*c*m,1*c*v)+.74*l(2*c*m,2*c*v)+0*l(4*c*m,4*c*v)+.29*l(8*c*m,8*c*v)+0*l(16*c*m,16*c*v)+.02*l(32*c*m,32*c*v),e/=2.03,e=Math.pow(e,4)}var f,x=(t.size.width/2-n.x)*(t.size.width/2-n.x),w=(t.size.height/2-n.y)*(t.size.height/2-n.y),M=Math.sqrt(x+w),y=M/t.size.width;switch(t.size.type){case"orbedArchipelago":y>.45&&(e-=18*(y-.45));break;case"archipelago":y>.35&&(e-=4*(y-.35)),y>.45&&(e-=18*(y-.45));break;default:y>.45&&(e-=18*(y-.45))}return f=1*d(1*c*m,1*c*v)+.75*d(2*c*m,2*c*v)+.33*d(4*c*m,4*c*v)+.33*d(8*c*m,8*c*v)+.33*d(16*c*m,16*c*v)+.5*d(32*c*m,32*c*v),f/=3.24,this.biomeRules(e,f)},biomeRules:function(e,t){var n={code:"temperateDesert",name:"Temperate desert",rgb:[241,220,169]},o={code:"grassland",name:"Grassland",rgb:[136,171,85]};return e<.08?{code:"ocean",name:"Ocean",rgb:[54,112,181]}:e<.09?{code:"deepWater",name:"Deep water",rgb:[75,130,196]}:e<.1?{code:"shallow",name:"Ocean",rgb:[54,112,181]}:e<.115?{code:"beach",name:"Beach",rgb:[227,204,150]}:e>.8?t<.1?{code:"steppe",name:"Steppe",rgb:[117,116,116]}:t<.2?{code:"overgrownCliffs",name:"Overgrown cliffs",rgb:[171,169,169]}:t<.3?{code:"highlands",name:"Highlands",rgb:[209,207,207]}:t<.5?{code:"tundra",name:"Tundra",rgb:[188,188,191]}:{code:"snowyMountains",name:"Snowy mountains",rgb:[252,253,255]}:e>.6?t<.33?n:t<.66?{code:"shrubland",name:"Shrubland",rgb:[136,153,119]}:{code:"taiga",name:"Taiga",rgb:[152,169,119]}:e>.3?t<.16?n:t<.5?o:t<.83?{code:"temperateDeciduousForest",name:"Temperate deciduous forest",rgb:[70,102,86]}:{code:"temperateRainForest",name:"Temperate rain forest",rgb:[67,136,85]}:t<.16?{code:"subtropicalDesert",name:"Subtropical Desert",rgb:[245,237,190]}:t<.33?o:t<.55?{code:"tropicalSeasonalForest",name:"Tropical seasonal forest",rgb:[99,150,101]}:t<.6?{code:"plains",name:"Plains",rgb:[219,217,169]}:t<.7?{code:"savanna",name:"Savanna",rgb:[204,201,145]}:{code:"tropicalRainForest",name:"Tropical rain forest",rgb:[103,147,89]}},getBiomeContent:function(e){var t=this,n=Object(m.cloneDeep)(this.data.biomes[e]);return Object.entries(n).forEach((function(e){var o=Object(d.a)(e,2),r=o[0],l=o[1];n[r]=t.data.content[r][l]})),n},createMapImage:function(e,t){var n=new x(e.size.width,e.size.height);return t.forEach((function(e){n.pixel[e.position.x-1][e.position.y-1]=[e.biome.rgb[0]/255,e.biome.rgb[1]/255,e.biome.rgb[2]/255,1]})),n.dataURL()},getRandomSeed:function(e){var t="";e||(e=30);for(var n=0;n<e;n++)t="".concat(t).concat(Math.floor(10*Math.random()));return t}},M={components:{Board:l.default},data:function(){return{world:{size:{width:500,height:500,block:10},seed:{elevation:"19549293178942729794",moisture:"48424901343056239472"},type:"archipelago",format:"collection"},size:"small",mapBase64:"",canvas:!1,loading:!1,displaySettings:!0}},methods:{render:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.mapBase64="",e.canvas=!1,t.t0=e.size,t.next="small"===t.t0?5:"medium"===t.t0?8:11;break;case 5:return e.world.size.width=500,e.world.size.height=500,t.abrupt("break",11);case 8:return e.world.size.width=1e3,e.world.size.height=1e3,t.abrupt("break",11);case 11:return e.loading=!0,t.next=14,e.sleep(200);case 14:e.$nextTick((function(){switch(e.world.format){case"png":e.mapBase64=w.generate(e.world);break;case"collection":e.canvas=!0;var t=w.generate(e.world),n=e.$refs.canvas.getContext("2d");t.forEach((function(e){var t=e.biome.rgb;n.fillStyle="rgb(".concat(t[0],",").concat(t[1],",").concat(t[2],")"),n.fillRect(e.position.x-1,e.position.y-1,1,1)}))}e.loading=!1}));case 15:case"end":return t.stop()}}),t)})))()},randomSeed:function(e){this.world.seed[e]=w.getRandomSeed(20)},downloadCanvas:function(){this.mapBase64=this.$refs.canvas.toDataURL()},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}},y=(n(218),n(31)),component=Object(y.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.loading?n("div",{staticClass:"loading-overlay"},[e._m(0)]):e._e(),e._v(" "),n("Board",{attrs:{width:e.world.size.width*e.world.size.block,height:e.world.size.height*e.world.size.block},scopedSlots:e._u([{key:"board",fn:function(){return[e.mapBase64?n("img",{staticClass:"map",attrs:{src:e.mapBase64,alt:"Red dot"}}):e._e(),e._v(" "),n("canvas",{ref:"canvas",staticClass:"map",attrs:{width:e.world.size.width,height:e.world.size.height}})]},proxy:!0},{key:"controls",fn:function(){return[n("h1",[e._v("Pixel island generator "),n("span",[e._v("0.5")])]),e._v(" "),n("button",{on:{click:function(t){e.displaySettings=!e.displaySettings}}},[e._v("\n        "+e._s(e.displaySettings?"Hide":"Show")+"\n      ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.displaySettings,expression:"displaySettings"}],staticClass:"settings"},[n("div",{staticClass:"input-box"},[e._v("\n          Type:\n          "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.world.type,expression:"world.type"}],attrs:{name:"type"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.world,"type",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"archipelago"}},[e._v("Orbed archipelago")])])]),e._v(" "),n("div",{staticClass:"input-box"},[e._v("\n          Size:\n          "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.size,expression:"size"}],staticStyle:{"max-width":"120px"},attrs:{name:"size"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.size=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"small"}},[e._v("Small (500x500)")]),e._v(" "),n("option",{attrs:{value:"medium"}},[e._v("Medium (1000x1000)")])])]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-box"},[e._v("\n          Elevation seed:\n          "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.world.seed.elevation,expression:"world.seed.elevation"}],attrs:{type:"text",placeholder:"Elevation seed",name:"Elevation seed"},domProps:{value:e.world.seed.elevation},on:{input:function(t){t.target.composing||e.$set(e.world.seed,"elevation",t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){return e.randomSeed("elevation")}}},[e._v("Random")])]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-box"},[e._v("\n          Moisture seed:\n          "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.world.seed.moisture,expression:"world.seed.moisture"}],attrs:{type:"text",placeholder:"Moisture Seed",name:"Moisture Seed"},domProps:{value:e.world.seed.moisture},on:{input:function(t){t.target.composing||e.$set(e.world.seed,"moisture",t.target.value)}}}),e._v(" "),n("button",{on:{click:function(t){return e.randomSeed("moisture")}}},[e._v("Random")])]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"input-box"},[e._v("\n          Render mode:\n          "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.world.format,expression:"world.format"}],staticStyle:{"max-width":"120px"},attrs:{name:"size"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.world,"format",t.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"png"}},[e._v("Base64")]),e._v(" "),n("option",{attrs:{value:"collection"}},[e._v("Canvas")])])]),e._v(" "),n("br"),e._v(" "),n("a",{directives:[{name:"show",rawName:"v-show",value:e.mapBase64||e.canvas,expression:"mapBase64 || canvas"}],attrs:{download:"map.png",href:e.canvas?e.$refs.canvas.toDataURL():e.mapBase64}},[n("button",[e._v("Download")])]),e._v(" "),n("button",{staticClass:"render-btn",on:{click:function(t){return e.render()}}},[e._v("Generate")])])]},proxy:!0}])}),e._v(" "),e._m(1)],1)}),o,!1,null,null,null);t.default=component.exports;installComponents(component,{Board:n(197).default})}}]);